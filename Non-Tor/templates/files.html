{% extends "base.html" %}

{% block title %}Files{% endblock %}

{% block content %}
    <h2>Your files</h2>
    <p><a href="{{ url_for('upload_file') }}">Upload new file</a></p>
    {% if mine %}
        <ul>
        {% for f in mine %}
            <li>{{ f.filename }} (expires {{ f.expiry }}) 
                <a href="{{ url_for('download_file', file_id=f.id) }}">Download</a>
                <form method="post" action="{{ url_for('share_file', file_id=f.id) }}" style="display:inline;">
                    <input type="text" name="username" placeholder="share with...">
                    <button type="submit">Share</button>
                </form>
                <form method="post" action="{{ url_for('delete_file', file_id=f.id) }}" style="display:inline;" onsubmit="return confirm('Delete this file?');">
                    <button type="submit">Delete</button>
                </form>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>You have no files.</p>
    {% endif %}

    <h2>Files shared with you</h2>
    {% if shared %}
        <ul>
        {% for f in shared %}
            <li>{{ f.filename }} from {{ f.owner.username }} (<a href="{{ url_for('download_file', file_id=f.id) }}">Download</a>)</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>None</p>
    {% endif %}
{% endblock %}
